一些灵感就停留在了这里

技能
技能分为主动技能和被动技能
主动技能由玩家出牌时选择性发动，在出牌阶段加入phasemanager发动
被动技能始终由服务器判断，在某些阶段比如伤害结算阶段等进行一次判断，条件满足则被动触发。但被动技能其实可以再分为询问型和触发型。触发型比如古锭刀，在杀时进行判断若有古锭刀技能则伤害加1，询问型有反馈和刚烈，除了条件满足还需要玩家点确认才触发。
被动询问技可以公共使用一个询问阶段。

每个人出牌时建立一个token，token=time+userid+tableid
这个期间类token正确的游戏流程消息被接收，否则认为是以前的消息不予处理

ai不适宜做成一个线程，否则在网络环境里线程爆多
比如其他玩家对ai执行slash，ai需要jink，那么ai把这个jink消息发到ai所在table的一个q里边，稍后再由table的timer来提取这个包加入全局q

全局q
使用epoll的话，epoll模型是单线程的，因此把从socket读到的包加入一个q，在读取端是一个thread
而处理这些q中包的线程可以是多个，这样当有多个table时才能迅速处理。